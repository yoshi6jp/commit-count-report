(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{136:function(e,t,a){e.exports=a(289)},141:function(e,t,a){},142:function(e,t,a){},289:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),c=a(9),o=a.n(c),s=(a(141),a(142),a(293)),u=a(82),i=a.n(u),m=a(121),d=a(44);!function(e){e.SET_URL="SET_URL",e.SET_TARGET="SET_TARGET",e.SET_DURATION="SET_DURATION",e.GET_COMMIT_COUNT="GET_COMMIT_COUNT",e.SET_RESULT="SET_RESULT"}(n||(n={}));var p=a(51),b={target:"",owner:"",name:"",since:"",until:"",sheetId:"1ywCxG8xTKOYK89AEZIqgpTvbvpbrb1s4H_bMVvKV59I",username:"ec29e90c-188d-11e8-bb72-00163ec1cd01",password:"0b82fe63b6bd450519ade02c3cb8f77ee581f25a810db28f3910e6cdd9d041bf",result:""},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.SET_URL:var a=(t.payload||"").split("/"),r=Object(d.a)(a,2),l=r[0],c=r[1];return l&&c?Object(p.a)({},e,{owner:l,name:c}):e;case n.SET_TARGET:var o=t.payload;return Object(p.a)({},e,{target:o});case n.SET_RESULT:var s=t.payload;return Object(p.a)({},e,{result:s});case n.SET_DURATION:var u=t.payload,i=u.since,m=u.until;return Object(p.a)({},e,{since:i,until:m});default:return e}},f=a(122),g=a.n(f),h=a(30),v=Object(r.createContext)({state:b,setUrl:function(e){},setTarget:function(e){},setDuration:function(e){e.since,e.until},getCommitCount:function(){}}),T=function(e){var t=e.target,a=e.owner,n=e.name,r=e.sheetId,l=e.username,c=e.password,o=e.since,s=void 0===o?"":o,u=e.until,i=void 0===u?"":u;return g.a.post("https://protected-depths-49487.herokuapp.com/statemachine/commit_count_report.json?blocking=true ",{input:{github:{target:t,owner:a,name:n,since:s,until:i},gsheet:{sheetId:r}}},{auth:{username:l,password:c}}).then(function(e){return e.data.output.github.output.values[0][5]})},O=function(e){var t=e.children,a=Object(r.useReducer)(E,b),c=Object(d.a)(a,2),o=c[0],s=c[1],u=Object(h.useWait)(),p=u.startWaiting,f=u.endWaiting,g=o.target,O=o.owner,C=o.name,w=o.since,N=o.until,S=o.username,j=o.password,_=o.sheetId,R={state:o,setUrl:Object(r.useCallback)(function(e){s({type:n.SET_URL,payload:e})},[s]),setTarget:Object(r.useCallback)(function(e){s({type:n.SET_TARGET,payload:e})},[s]),setDuration:Object(r.useCallback)(function(e){var t=e.since,a=e.until;s({type:n.SET_DURATION,payload:{since:t,until:a}})},[s]),getCommitCount:Object(r.useCallback)(function(){g&&O&&C&&Object(m.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p("fetch"),e.prev=1,e.next=4,T({target:g,owner:O,name:C,since:w,until:N,username:S,password:j,sheetId:_});case 4:t=e.sent,s({type:n.SET_RESULT,payload:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.prev=11,f("fetch"),e.finish(11);case 14:case"end":return e.stop()}},e,this,[[1,8,11,14]])}))()},[s,g,O,C,w,N,S,j,_,p,f])};return l.a.createElement(v.Provider,{value:R},t)},C=function(){return l.a.createElement("nav",{className:"navbar navbar-dark bg-dark"},l.a.createElement("span",{className:"navbar-brand mb-0 h1"},"Commit Count Report"))},w=function(e){var t=e.children,a=Object(r.useContext)(v).getCommitCount,n=Object(h.useWait)().isWaiting,c=Object(r.useCallback)(function(e){n("fetch")||a(),e.preventDefault()},[a,n]);return l.a.createElement("form",{onSubmit:c},t)},N=function(){return l.a.createElement("p",{className:"lead pt-1"},"FaaS Shell sample Commit Count Report Web GUI.")},S=a(123),j=a.n(S),_=function(e){var t=e.label,a=e.placeholder,n=e.prepend,c=e.setter,o=e.id,s=void 0===o?j.a.uniqueId("input"):o;return function(){var e=Object(r.useContext)(v)[c],o=Object(r.useCallback)(function(t){e(t.target.value)},[e]);return l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{htmlFor:s,className:"col-sm-3 col-form-label"},t),l.a.createElement("div",{className:"input-group col-sm-9"},n&&l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},n)),l.a.createElement("input",{onChange:o,required:!0,className:"form-control",id:s,placeholder:a})))}},R=_({label:"GitHub Repository URL:",placeholder:"naohirotamura/faasshell",prepend:"https://github.com/",setter:"setUrl"}),y=_({label:"Commiter's search string:",placeholder:"fujitsu.com",setter:"setTarget"}),I=a(292).a.RangePicker,k=function(){var e=Object(r.useContext)(v).setDuration,t=Object(r.useCallback)(function(t){var a=Object(d.a)(t,2),n=a[0],r=a[1];if(n&&r){var l=n.startOf("day").toISOString(),c=r.endOf("day").toISOString();e({since:l,until:c})}},[e]);return l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{className:"col-sm-3 col-form-label"},"Search Duration (Option)"),l.a.createElement("div",{className:"col-sm-9"},l.a.createElement(I,{onChange:t})))},U=a(291),x=function(){var e=(0,Object(h.useWait)().isWaiting)("fetch");return l.a.createElement("div",{className:"form-group row"},l.a.createElement("div",{className:"col-sm-9 offset-sm-3"},l.a.createElement("button",{disabled:e,className:"btn-info btn"},"Get Commit Count"),l.a.createElement(U.a,{className:"ml-2",spinning:e})))},G=function(){var e=Object(r.useContext)(v).state.result;return l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{className:"col-sm-3 col-form-label"},"Result"),l.a.createElement("div",{className:"input-group col-sm-9"},l.a.createElement(s.a,null,e)))},W=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"All results are logged into"," ",l.a.createElement("a",{href:"https://docs.google.com/spreadsheets/d/1ywCxG8xTKOYK89AEZIqgpTvbvpbrb1s4H_bMVvKV59I/edit#gid=0",title:"Google Sheets",target:"_blank"},"Google Sheets"),"."),l.a.createElement("small",{className:"from-text text-muted"},"Get Commit Count button privdes the same effect as the following git command:"),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-body"},l.a.createElement("pre",null,l.a.createElement("small",null,l.a.createElement("code",null,"$ git clone https://github.com/NaohiroTamura/faasshell",l.a.createElement("br",null),"$ cd faasshell",l.a.createElement("br",null),"$ git log --since=2018-06-21T00:00:00+00:00 --until=2018-07-20T00:00:00+00:00 --no-merges --format=%ae | grep fujitsu.com | wc -l"))))))},A=function(){return l.a.createElement(h.useWait.Waiter,null,l.a.createElement(O,null,l.a.createElement(C,null),l.a.createElement("div",{className:"container"},l.a.createElement(N,null),l.a.createElement(s.a,null,l.a.createElement(w,null,l.a.createElement(R,null),l.a.createElement(y,null),l.a.createElement(k,null),l.a.createElement(x,null),l.a.createElement(G,null),l.a.createElement(W,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[136,1,2]]]);
//# sourceMappingURL=main.4ecde9e9.chunk.js.map